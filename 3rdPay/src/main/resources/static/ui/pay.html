<!DOCTYPE html>
<html lang="en">
    <head>
        <title>3rdPay</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style>
            @font-face {
              font-family:'Lucida Calligraphy Italic';
              src: url('../font/Lucida_Calligraphy_Italic.TTF');
            }

            @font-face {
              font-family:'Acadian';
              src: url('../font/Acadian.TTF');
            }
            /* 备选字体 */
            @font-face {
              font-family:'GoodfonT';
              src: url('../font/GoodfonT.NET XS18.TTF');
            }
            @font-face {
              font-family:'GothicE';
              src: url('../font/GothicE.ttf');
            }
            @font-face {
              font-family:'MetropolitainesD';
              src: url('../font/MetropolitainesD.TTF');
            }
        </style>
        <script src="../js/jquery.min.js"></script>
        <script type="text/javascript" >
            function getUrlParam(name) {
                var searchParams = new URLSearchParams(window.location.search);
                return searchParams.get(name);
            }
            $(function() {
                //加载订单信息
                var payFormStr = getUrlParam("payFormStr");
                console.log("payFormStr:",payFormStr);

                if(!payFormStr){
                    alert("订单信息有误");
                    return;
                }

                //访问后台解析订单信息
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
		            headers: {'Content-Type': 'application/json'},
                    url: "../pay/prePay",
                    data: JSON.stringify({payFormStr:payFormStr}),
                    dataType: "json",
                    success: function(data) {
                        console.log("parsePayForm:",data);
                        if(data.code == 0){
                            $("#payMoney").text(data.data.amt.toFixed(2));
                            $("#payerNo").text(data.data.payerNo);
                        }
                    }
                })


                $("#payBtn").click(function() {
                    console.log("开始支付")
                })
            });
        </script>
    </head>
    <body style="background-color:#f8f8f9" >
        <div style="text-align:center;margin-top:27px" >
            <div style="margin:0 auto;text-align:center;width:40%;height:60px;border-radius:5px;background-image: url('../image/card_bg.jpg');background-position: 0 -15px;">
                <div style="padding-top:12px;color:white;font-size:25pt;font-weight:bold;font-style: italic;font-family:GoodfonT;">
                    3rdPay
                </div>
            </div>
            <div style="text-align:center;font-size:25pt">
                ￥<span id="payMoney" style="font-size:44pt;font-weight:bold;font-family:Helvetica">00</span>
            </div>
            <div style="width:300px;text-align:center;display:flex;justify-content:space-between;margin-left:auto;margin-right:auto;">
                <div style="text-align:left;color:#80848f">付款账号：</div><div id="payerNo" style="text-align:right;color:#80848f">***</div>
            </div>
            <div style="text-align:center;margin-top:30px">
                <div>请输入支付密码</div>
                <div id="payPassword">
                    <label for="payPwd"></label><input type="password" maxlength="6" id="payPwd" style="width: 100px;height: 30px;">
                </div>
            </div>
            <div style="text-align:center;margin-top:50px">
                <button id="payBtn" style="width: 80%;height:40px;background-color:#2d8cf0;color:white;border:0;border-radius:10px;font-weight:bold">支付</button>
            </div>
        </div>
    </body>
</html>