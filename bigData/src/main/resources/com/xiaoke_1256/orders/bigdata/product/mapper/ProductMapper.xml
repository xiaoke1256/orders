<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiaoke_1256.orders.bigdata.product.mapper.ProductMapper">
  <resultMap id="BaseResultMap" type="com.xiaoke_1256.orders.bigdata.product.model.Product">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 28 16:03:57 CST 2024.
    -->
    <id column="product_code" jdbcType="CHAR" property="productCode" />
    <result column="product_name" jdbcType="VARCHAR" property="productName" />
    <result column="product_price" jdbcType="DECIMAL" property="productPrice" />
    <result column="store_no" jdbcType="VARCHAR" property="storeNo" />
    <result column="product_status" jdbcType="CHAR" property="productStatus" />
    <result column="on_sale_time" jdbcType="TIMESTAMP" property="onSaleTime" />
    <result column="product_intro" jdbcType="VARCHAR" property="productIntro" />
    <result column="brand" jdbcType="VARCHAR" property="brand" />
    <result column="insert_time" jdbcType="TIMESTAMP" property="insertTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="IN_SECKILL" jdbcType="CHAR" property="inSeckill" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 28 16:03:57 CST 2024.
    -->
    delete from product.product
    where product_code = #{productCode,jdbcType=CHAR}
  </delete>
  <insert id="insert" parameterType="com.xiaoke_1256.orders.bigdata.product.model.Product">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 28 16:03:57 CST 2024.
    -->
    insert into product.product (product_code, product_name, product_price,
      store_no, product_status, on_sale_time, 
      product_intro, brand, insert_time, 
      update_time, IN_SECKILL)
    values (#{productCode,jdbcType=CHAR}, #{productName,jdbcType=VARCHAR}, #{productPrice,jdbcType=DECIMAL}, 
      #{storeNo,jdbcType=VARCHAR}, #{productStatus,jdbcType=CHAR}, #{onSaleTime,jdbcType=TIMESTAMP}, 
      #{productIntro,jdbcType=VARCHAR}, #{brand,jdbcType=VARCHAR}, #{insertTime,jdbcType=TIMESTAMP}, 
      #{updateTime,jdbcType=TIMESTAMP}, #{inSeckill,jdbcType=CHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.xiaoke_1256.orders.bigdata.product.model.Product">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 28 16:03:57 CST 2024.
    -->
    update product.product
    set product_name = #{productName,jdbcType=VARCHAR},
      product_price = #{productPrice,jdbcType=DECIMAL},
      store_no = #{storeNo,jdbcType=VARCHAR},
      product_status = #{productStatus,jdbcType=CHAR},
      on_sale_time = #{onSaleTime,jdbcType=TIMESTAMP},
      product_intro = #{productIntro,jdbcType=VARCHAR},
      brand = #{brand,jdbcType=VARCHAR},
      insert_time = #{insertTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      IN_SECKILL = #{inSeckill,jdbcType=CHAR}
    where product_code = #{productCode,jdbcType=CHAR}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 28 16:03:57 CST 2024.
    -->
    select product_code, product_name, product_price, store_no, product_status, on_sale_time, 
    product_intro, brand, insert_time, update_time, IN_SECKILL
    from product.product
    where product_code = #{productCode,jdbcType=CHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 28 16:03:57 CST 2024.
    -->
    select product_code, product_name, product_price, store_no, product_status, on_sale_time, 
    product_intro, brand, insert_time, update_time, IN_SECKILL
    from product.product
  </select>

  <select id="queryByCondition" parameterType="com.xiaoke_1256.orders.bigdata.product.dto.ProductCondition" resultMap="BaseResultMap">
    select product_code, product_name, product_price, store_no,in_seckill , product_status, product_intro, insert_time, update_time
    from product.PRODUCT
    where 1=1
    <if test="productCode!=null and productCode!=''">
      <!--<bind name="productCodeLike" value="productCode + '%'" />-->
      and product_code like concat(#{productCode} , '%')
    </if>
    <if test="productName!=null and productName!=''">
      <!--<bind name="productNameLike" value="'%' + productName + '%'" />-->
      and product_name like concat('%' , #{productName} , '%')
    </if>
    <if test="storeNo!=null and storeNo!=''">
      and store_no = #{storeNo}
    </if>
    <if test="storeNos!=null and storeNos.length>0">
      and store_no in
      <foreach collection="storeNos" item="sno" index="idx" open="(" close=")" separator=",">
        #{sno}
      </foreach>
    </if>
    order by update_time desc,product_code asc
    <!--
    <if test="pageSize!=null and pageNo!=null and pageSize &gt; 0 and pageNo &gt; 0 ">
        <bind name="fromIndex" value="(pageNo-1)*pageSize"/>
        limit #{fromIndex},#{pageSize}
    </if>
    -->
  </select>
</mapper>